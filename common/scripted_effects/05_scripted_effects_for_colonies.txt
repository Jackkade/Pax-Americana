#Overwritten to not remove native cultures
on_colonist_boosting_colony_effect = {
    reset_to_pre_colonial_culture_religion = yes
}

reset_to_pre_colonial_culture_religion = {
	if = {
		limit = {
			native_size = 1
		}
		change_culture = variable:pre_colonial_culture_var
    	change_original_culture = variable:pre_colonial_culture_var
	}
	else_if = {
		limit = {
			culture = noculture
		}
		change_culture = owner
    	change_original_culture = owner
	}
	if = {
		limit = {
			native_size = 1
		}
		change_religion = variable:pre_colonial_religion_var
	}
	else_if = {
		limit = {
			religion = noreligion
		}
		change_religion = owner
	}
}

#Credit to Hadrios' Culture Influence mod for original effect and concept
pre_colonial_culture_preserver_effect = {	
	every_province = {
		limit = {
			OR = {
				is_city = no
				owner = { primitives = yes }
			}
			#native_size = 1 #Must be inhabited
			NOT = { has_province_flag = ci_set_pre_colonial_culture_var }
		}
		export_to_variable = {
			which = pre_colonial_culture_var
			value = culture
		}
		export_to_variable = {
			which = pre_colonial_religion_var
			value = religion
		}
		set_province_flag = ci_set_pre_colonial_culture_var
	}
}

set_colonial_maintnance_effect = {
	#Colony cost modifiers
	remove_province_modifier = pa_new_colony_reduced_cost_1
	remove_province_modifier = pa_new_colony_reduced_cost_2
	remove_province_modifier = pa_new_colony_reduced_cost_3
	remove_province_modifier = pa_new_colony_increased_cost_1
	remove_province_modifier = pa_new_colony_increased_cost_2
	remove_province_modifier = pa_new_colony_increased_cost_3
	remove_province_modifier = pa_new_colony_increased_cost_4
	remove_province_modifier = pa_new_colony_increased_cost_native
	remove_province_modifier = pa_new_colony_increased_cost_burgers_privilege
    
	if = {
        limit = {
            owner = {
                has_active_policy = colonial_expansions
                
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_reduced_cost_1
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
    if = {
        limit = {
            owner = {
                full_idea_group = expansion_ideas
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_reduced_cost_2
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
    if = {
        limit = {
            owner = {
                has_estate_privilege = estate_nobles_expedition_rights
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_reduced_cost_3
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }

    if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                has_estate_privilege = estate_burghers_new_world_charter 
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_burgers_privilege
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }

    if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                primitives = yes 
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_native
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }

    if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                calc_true_if = {
                    all_owned_province = {
                        has_province_modifier = pa_new_colony_cooldown 
                    }
                    amount = 35
                }
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_4
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
    else_if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                calc_true_if = {
                    all_owned_province = {
                        has_province_modifier = pa_new_colony_cooldown 
                    }
                    amount = 30
                }
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_3
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
    else_if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                calc_true_if = {
                    all_owned_province = {
                        has_province_modifier = pa_new_colony_cooldown 
                    }
                    amount = 25
                }
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_2
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
    else_if = {     #anti limitless expansion modifiers
        limit = {
            owner = {
                calc_true_if = {
                    all_owned_province = {
                        has_province_modifier = pa_new_colony_cooldown 
                    }
                    amount = 15
                }
            }
        }
        add_permanent_province_modifier = {
            name = pa_new_colony_increased_cost_1
            duration = 7300		#Currently 20 Years, may need to be lower
        }
    }
}